(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{"4u6e":function(module,exports,e){},"99fz":function(module,exports,e){},CSo3:function(module,e,t){"use strict";t.d(e,"c",function(){return o}),t.d(e,"a",function(){return s}),t.d(e,"b",function(){return a});var r=t("MVZn"),n=t.n(r),i=t("YDId"),o=function fetchSubscriptionForForum(e,t){var r=t.forumSubscriptionId,n=t.forumType;return i.a(r,n).then(function(t){e.dispatch("UPDATE_SUBSCRIPTION",t)}).fail(function(t){e.dispatch("UPDATE_SUBSCRIPTION_FAILED",t)})},s=function addSubscription(e,t){var r=t.forumSubscriptionId,n=t.forumType;return e.dispatch("UPDATE_SUBSCRIPTION",{id:r,isInProgress:!0}),i.b(r,n).then(function(){e.dispatch("UPDATE_SUBSCRIPTION",{id:r,isSubscribed:!0})}).fail(function(t){e.dispatch("UPDATE_SUBSCRIPTION_FAILED",t)})},a=function deleteSubscription(e,t){var r=t.subscription,o=t.forumSubscriptionId,s=t.forumType;return e.dispatch("UPDATE_SUBSCRIPTION",n()({},r,{isInProgress:!0})),i.c(o,s).then(function(){e.dispatch("UPDATE_SUBSCRIPTION",{id:o,isSubscribed:!1})}).fail(function(t){e.dispatch("UPDATE_SUBSCRIPTION_FAILED",t)})}},NjuL:function(module,e,t){"use strict";var r=t("VbXa"),n=t.n(r),i=t("w/1P"),o=t.n(i),s=t("CsdX"),a=t("sbe7"),u=t.n(a),c=t("eJMc"),p=t.n(c),l=t("VYij"),m=t.n(l),d=t("cIEV"),b=t.n(d),f=function emptyFunction(){},S=function(e){function Breadcrumbs(){return e.apply(this,arguments)||this}n()(Breadcrumbs,e);var t=Breadcrumbs.prototype;return t.getFilteredLinks=function getFilteredLinks(){var e;return this.props.links.slice().filter(l.identity)},t.render=function render(){var e=this.props,t=e.className,r=e.linkClassName,n=e.separator,i=e.separatorStyles,a=this.getFilteredLinks();return u.a.createElement("ol",{className:o()("rc-Breadcrumbs inline",t)},a.map(function(e,t){var o=[u.a.createElement("li",null,e.href?u.a.createElement(p.a,{className:r,to:e.href,onClick:e.onClick||f},e.label):u.a.createElement("span",{className:r},e.label))];return t!==a.length-1&&o.push(u.a.createElement("li",Object(s.d)("divider",i),n||"/")),o}))},Breadcrumbs}(u.a.Component);e.a=S},OVKh:function(module,e,t){"use strict";var r=t("VbXa"),n=t.n(r),i=t("VYij"),o=t.n(i),s=t("17x9"),a=t.n(s),u=t("sbe7"),c=t.n(u),p=t("sQ/U"),l=t("CSo3"),m=t("y1LI"),d=t("8cuT"),b=t.n(d),f=t("GP6s"),S=t.n(f),h=t("UaPE"),v=t.n(h),y=function(e){function SubscriptionButton(t,r){var n;return(n=e.call(this,t,r)||this).toggleSubscription=function(){var e=n.props,t=e.isSubscribed,r=e.forumType,i=e.subscription,o=e.forumSubscriptionId;t?(n.context.executeAction(l.b,{subscription:i,forumSubscriptionId:o,forumType:r}),n.setState({showSubscriptionDetails:!0,subscriptionDetails:S()("You will no longer receive emails whenever new threads are added.")})):(n.context.executeAction(l.a,{forumType:r,forumSubscriptionId:o}),n.setState({showSubscriptionDetails:!0,subscriptionDetails:S()("You will receive emails whenever new threads are added.")}))},n.state={subscriptionDetails:null,showSubscriptionDetails:!1},n}n()(SubscriptionButton,e);var t=SubscriptionButton.prototype;return t.componentDidMount=function componentDidMount(){var e=this.props,t=e.subscription,r=e.forumSubscriptionId,n=e.forumType;t||this.context.executeAction(l.c,{forumType:n,forumSubscriptionId:r})},t.componentDidUpdate=function componentDidUpdate(){var e=this.props,t=e.subscription,r=e.forumSubscriptionId,n=e.forumType;t||this.context.executeAction(l.c,{forumType:n,forumSubscriptionId:r})},t.render=function render(){var e=this.props,t=e.subscription,r=e.isSubscribed,n=e.hasError,i=e.isSubscriptionInProgress,o=this.state,s=o.showSubscriptionDetails,a=o.subscriptionDetails;return c.a.createElement("div",{className:"rc-SubscriptionButton horizontal-box vertical-when-mobile align-items-vertical-center"},c.a.createElement("button",{className:"passive",onClick:this.toggleSubscription,disabled:!t},(!t||i)&&c.a.createElement(m.a,{name:"spinner",className:"cif-spin"}),!!t&&!i&&(r?S()("Unsubscribe"):S()("Subscribe"))),!n&&s&&c.a.createElement("div",{className:"message caption-text"},a),n&&c.a.createElement("div",{className:"errorMessage"},S()("Sorry, something went wrong. Try again.")))},SubscriptionButton}(c.a.Component);y.propTypes={hasError:a.a.bool,forumSubscriptionId:a.a.string,subscription:a.a.object,forumType:a.a.string,groupId:a.a.string,isSubscribed:a.a.bool,isSubscriptionInProgress:a.a.bool},y.contextTypes={executeAction:a.a.func.isRequired},e.a=o.a.compose(b()(["SubscriptionStore","CourseMembershipStore","CourseStore"],function(e,t){var r=e.SubscriptionStore,n=e.CourseMembershipStore,i=e.CourseStore,o=t.forumId,s=o&&o.split("~"),a=o&&"".concat(p.a.get().id,"~").concat(s[0],"~").concat(s[1]);return{forumSubscriptionId:a,hasError:r.hasError(),subscription:r.getSubscription(a),isSubscribed:r.getIsSubscribed(a),isSubscriptionInProgress:r.getIsSubscriptionInProgress(a)}}))(y)},UaPE:function(module,exports,e){var t=e("99fz"),r;"string"==typeof t&&(t=[[module.i,t,""]]);var n={transform:void 0},i=e("aET+")(t,n);t.locals&&(module.exports=t.locals)},Ub7k:function(module,exports,e){var t=e("puSo"),r;"string"==typeof t&&(t=[[module.i,t,""]]);var n={transform:void 0},i=e("aET+")(t,n);t.locals&&(module.exports=t.locals)},UtLM:function(module,exports,e){},YDId:function(module,e,t){"use strict";t.d(e,"a",function(){return n}),t.d(e,"b",function(){return i}),t.d(e,"c",function(){return o});var r=t("obES"),n=function getForumSubscription(e,t){return r.a.getSubscription(e,t).then(function(e){return Object.assign(e.elements[0],{isSubscribed:!0})}).catch(function(t){if(404===t.status)return{id:e,isSubscribed:!1};throw t})},i=function subscribeUserToEntity(e,t){return r.a.subscribe(e,t)},o=function unsubscribeUserFromEntity(e,t){return r.a.unsubscribe(e,t)}},arLX:function(module,e,t){"use strict";var r=t("MVZn"),n=t.n(r),i=t("SaLm");e.a=function(e){if(!e.currentForum)return e;var t=e.courseForums.concat(e.mentorForums).concat(e.groupForums),r=t.find(function(e){return e.forumType.typeName===i.j.rootForumType}),o=e.currentForum;e.currentForum.parentForumId&&e.currentForum.parentForumId!==r.id&&(o=t.find(function(t){return t.id===e.currentForum.parentForumId}));var s=t.filter(function(e){return e.parentForumId===o.id});return s.unshift(o),n()({},e,{listedForums:s,parentForumId:o.id})}},cIEV:function(module,exports,e){var t=e("4u6e"),r;"string"==typeof t&&(t=[[module.i,t,""]]);var n={transform:void 0},i=e("aET+")(t,n);t.locals&&(module.exports=t.locals)},jYk1:function(module,e,t){"use strict";var r=t("VbXa"),n=t.n(r),i=t("17x9"),o=t.n(i),s=t("sbe7"),a=t.n(s),u=t("VYij"),c=t.n(u),p=t("w/1P"),l=t.n(p),m=t("eJMc"),d=t.n(m),b=t("Akn8"),f=t("BZ+2"),S=t("zFZo"),h=t("weTL"),v=t("+LJP"),y=t("pqXt"),T=t("VXRf"),E=t("hN99"),g=t("arLX"),I=t("oQ9N"),F=t("GP6s"),N=t.n(F),O=t("vJ/u"),x=t.n(O),j=function(e){function SubforumSidebar(){return e.apply(this,arguments)||this}var t;return n()(SubforumSidebar,e),SubforumSidebar.prototype.render=function render(){var e=this.props,t=e.listedForums,r=e.currentForumId,n=e.parentForumId,i=e.courseSlug;if(!t||t.length<=1)return null;return a.a.createElement("div",{className:"rc-SubforumSidebar card-rich-interaction flex-1"},a.a.createElement("h2",{className:"subforums-list-title headline-1-text color-secondary-text"},N()("Subforums")),a.a.createElement("ul",{className:"nostyle"},t.map(function(e){var t=l()("forum-title",{"body-2-text":e.id===r,"body-1-text":e.id!==r}),o=b.a.join(Object(E.e)(i),e.link);return a.a.createElement(d.a,{key:e.id,to:o,className:"nostyle"},a.a.createElement("li",{className:"subforum-entry"},e.id===r&&a.a.createElement("div",{className:"current-forum-indicator"}),a.a.createElement("div",{className:t},e.id===n?N()("All"):e.title)))})))},SubforumSidebar}(a.a.Component);j.propTypes={courseSlug:o.a.string,listedForums:o.a.arrayOf(o.a.oneOfType([o.a.instanceOf(f.a),o.a.instanceOf(S.a),o.a.instanceOf(h.a)])),currentForumId:o.a.string,parentForumId:o.a.string},e.a=c.a.compose(Object(I.a)({fields:["link","title","description","parentForumId"]}),Object(v.a)(y.a),Object(T.a)(g.a))(j)},obES:function(module,e,t){"use strict";var r=t("wiyT"),n=t.n(r),i=t("CWYE"),o=t("SaLm"),s=Object(i.a)("/api/onDemandCourseForumSubscriptions.v1",{type:"rest"}),a=Object(i.a)("/api/onDemandMentorForumSubscriptions.v1",{type:"rest"}),u=Object(i.a)("/api/groupForumSubscriptions.v1",{type:"rest"}),c=function getSubscription(e,t){return t===o.j.mentorForumType?n()(a.get(e)):t===o.j.groupForumType?n()(u.get(e)):n()(s.get(e))},p=function subscribe(e,t){return t===o.j.mentorForumType?n()(a.put(e)):t===o.j.groupForumType?n()(u.put(e)):n()(s.put(e))},l=function unsubscribe(e,t){return t===o.j.mentorForumType?n()(a.delete(e)):t===o.j.groupForumType?n()(u.delete(e)):n()(s.delete(e))};e.a={getSubscription:c,subscribe:p,unsubscribe:l}},puSo:function(module,exports,e){},"vJ/u":function(module,exports,e){var t=e("UtLM"),r;"string"==typeof t&&(t=[[module.i,t,""]]);var n={transform:void 0},i=e("aET+")(t,n);t.locals&&(module.exports=t.locals)},vkTq:function(module,e,t){"use strict";t.r(e);var r=t("VbXa"),n=t.n(r),i=t("17x9"),o=t.n(i),s=t("sbe7"),a=t.n(s),u=t("VYij"),c=t.n(u),p=t("Akn8"),l=t("oVXz"),m=t("hN99"),d=t("JUgE"),b=t("NjuL"),f=t("OVKh"),S=t("STl7"),h=t("jYk1"),v=t("UVOs"),y=t("5VK0"),T=t("ypD2"),E=t("pqXt"),g=t("arLX"),I=t("SaLm"),F=t("oQ9N"),N=t("BZ+2"),O=t("zFZo"),x=t("weTL"),j=t("VXRf"),w=t("+LJP"),P=t("GP6s"),U=t.n(P),k=t("Ub7k"),D=t.n(k),C=function(e){function ThreadsView(){return e.apply(this,arguments)||this}n()(ThreadsView,e);var t=ThreadsView.prototype;return t.renderSubscriptionButton=function renderSubscriptionButton(){var e=this.props.currentForum;if(!e||e.forumType.typeName===I.j.itemForumType)return null;return a.a.createElement("div",{className:"flex-1"},a.a.createElement(f.a,{forumId:this.props.currentForum&&this.props.currentForum.id,forumType:this.props.currentForum&&this.props.currentForum.forumType.typeName,groupId:this.props.currentForum&&this.props.currentForum.forumType.definition.groupId}))},t.render=function render(){var e=this.props.currentForum;if(!e)return a.a.createElement("div",{className:"forum-name headline-5-text color-primary-text"},U()("Oops! Looks like this thread isn't viewable or does not exist."));var t=e.parentForumId&&this.props.listedForums.find(function(t){return e.parentForumId===t.id}),r=e.title,n=e.description,i=e.id,o=p.a.join(Object(m.e)(this.props.courseSlug),e.link),s=[{label:U()("Discussion Forums"),href:Object(m.d)()},t?{label:t.title,href:p.a.join(Object(m.e)(this.props.courseSlug),t.link)}:void 0],u=!!this.context.router.params.question_id;return a.a.createElement("div",{className:"rc-ThreadsView"},a.a.createElement("div",{className:"horizontal-box vertical-when-tablet"},a.a.createElement("div",{className:"flex-2 threads-view-header"},a.a.createElement(b.a,{className:"breadcrumbs",links:s}),a.a.createElement("div",null,a.a.createElement("div",{className:"forum-name headline-5-text color-primary-text"},r),!u&&a.a.createElement("div",{className:"forum-description horizontal-box align-items-vertical-center vertical-when-mobile"},a.a.createElement(d.a,{className:"body-1-text",cml:n}),a.a.createElement("div",null,this.renderSubscriptionButton())))),a.a.createElement("div",{className:"flex-1 align-self-end session-switcher-container"},a.a.createElement(S.a,null))),a.a.createElement("div",{className:"horizontal-box align-items-top vertical-when-tablet"},a.a.createElement(l.a,{className:"flex-2 discussions-body-column",key:i,backLink:o}),a.a.createElement(h.a,null)))},ThreadsView}(a.a.Component);C.propTypes={currentForum:o.a.oneOfType([o.a.instanceOf(N.a),o.a.instanceOf(O.a),o.a.instanceOf(x.a)]),listedForums:o.a.arrayOf(o.a.oneOfType([o.a.instanceOf(N.a),o.a.instanceOf(O.a),o.a.instanceOf(x.a)])),courseSlug:o.a.string},C.contextTypes={router:o.a.object.isRequired},e.default=Object(u.compose)(Object(F.a)({fields:["title","description","link"],subcomponents:[h.a,v.a,y.a,T.a]}),Object(w.a)(E.a),Object(j.a)(g.a))(C)}}]);
//# sourceMappingURL=31.e49837dfa7ce61517a77.js.map